<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home - Tech Shop</title>
    <link href="https://fonts.googleapis.com/css?family=Heebo:300,400,600,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">

    <!-- 메타 태그 및 프리로드 추가 -->
    <meta name="description" content="VR Headsets - Discover our line of premium VR headsets">
    <link rel="preload" href="/css/styles.css" as="style">
    <link rel="preconnect" href="https://fakestoreapi.com">

    <!-- 중요한 이미지 프리로드 (WebP 포맷으로 교체) -->
    <link rel="preload" href="images/Hero_Desktop.webp" as="image" media="(min-width: 961px)">
    <link rel="preload" href="images/Hero_Tablet.webp" as="image" media="(min-width: 577px) and (max-width: 960px)">
    <link rel="preload" href="images/Hero_Mobile.webp" as="image" media="(max-width: 576px)">

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
        new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
      j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
      'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-PKK35GL5');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Cookie Consent - defer 속성 추가 -->
    <script type="text/javascript" src="//www.freeprivacypolicy.com/public/cookie-consent/4.1.0/cookie-consent.js" charset="UTF-8" defer></script>
    <script type="text/javascript" charset="UTF-8">
      document.addEventListener('DOMContentLoaded', function() {
        if (typeof cookieconsent !== 'undefined') {
          cookieconsent.run({"notice_banner_type":"simple","consent_type":"express","palette":"light","language":"en","page_load_consent_levels":["strictly-necessary"],"notice_banner_reject_button_hide":false,"preferences_center_close_button_hide":false,"page_refresh_confirmation_buttons":false,"website_name":"Performance Course"});
        }
      });
    </script>

    <!-- 프로그레시브 이미지 로딩을 위한 스타일 -->
    <style>
        .progressive-image {
            width: 100%;
            height: auto;
            transition: filter 0.3s ease-out;
        }
        .progressive-image.blur {
            filter: blur(10px);
        }
        .progressive-image.loaded {
            filter: blur(0);
        }
    </style>
</head>

<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-PKK35GL5"
                  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<header>
    <div class="container">
        <section class="logo">
            <a href="index.html">
                <strong>VR</strong>
                <span class="blue-dot"></span>
                <span class="blue-dot"></span>
                <span>Headsets</span>
            </a>
        </section>
        <nav>
            <ul>
                <li><a href="about.html">About us</a></li>
                <li><a href="index.html#best-sellers-section">Best Sellers</a></li>
                <li><a href="index.html#newsletter-section">Newsletter</a></li>
                <li class="menu-icon"><img src="images/menu_icon.webp" alt="Menu icon" width="24" height="24"></li>
            </ul>
        </nav>
    </div>
</header>

<section class="hero">
    <!-- 반응형 이미지 및 WebP 포맷 지원 추가 -->
    <picture>
        <source srcset="images/Hero_Desktop.webp" media="(min-width: 961px)" type="image/webp">
        <source srcset="images/Hero_Desktop.jpg" media="(min-width: 961px)" type="image/jpeg">

        <source srcset="images/Hero_Tablet.webp" media="(min-width: 577px) and (max-width: 960px)" type="image/webp">
        <source srcset="images/Hero_Tablet.webp" media="(min-width: 577px) and (max-width: 960px)" type="image/jpeg">

        <source srcset="images/Hero_Mobile.webp" media="(max-width: 576px)" type="image/webp">
        <source srcset="images/Hero_Mobile.webp" media="(max-width: 576px)" type="image/jpeg">

        <!-- 폴백 이미지 -->
        <img class="desktop" src="images/Hero_Desktop_Placeholder.jpg" data-src="images/Hero_Desktop.jpg"
             alt="VR Headsets" width="1440" height="660" class="progressive-image blur">
    </picture>

    <div class="hero-content">
        <div class="container">
            <h1>Discover our line of VR Headsets</h1>
            <p>
                Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
                doloremque laudantium.
            </p>
            <button>View Headsets</button>
        </div>
    </div>
</section>

<section class="country-bar hidden">
</section>

<!-- Best Sellers 섹션 이미지 문제 해결 -->
<section class="best-sellers" id="best-sellers-section">
    <h1>Best Sellers</h1>
    <hr>
    <div class="product-slider">
        <div class="container">
            <div class="product new">
                <div class="product-picture">
                    <!-- 회색 배경 없이 이미지 직접 로드 -->
                    <img src="images/vr1.webp" alt="product: Apple Headset"
                         width="250" height="250">
                </div>
                <div class="product-info">
                    <h5 class="categories">Headsets, Apple</h5>
                    <h4 class="title">Apple Headset</h4>
                    <h3 class="price">
                        <span>US$ 450.00</span>
                    </h3>
                    <button>ADD TO BAG</button>
                </div>
            </div>

            <div class="product new">
                <div class="product-picture">
                    <!-- 회색 배경 없이 이미지 직접 로드 -->
                    <img src="images/vr2.webp" alt="product: Playstation Headset"
                         width="250" height="250">
                </div>
                <div class="product-info">
                    <h5 class="categories">Headsets, PS</h5>
                    <h4 class="title">Playstation Headset</h4>
                    <h3 class="price">
                        <span>US$ 399.99</span>
                    </h3>
                    <button>ADD TO BAG</button>
                </div>
            </div>

            <div class="product">
                <div class="product-picture">
                    <!-- 회색 배경 없이 이미지 직접 로드 -->
                    <img src="images/vr3.webp" alt="product: Oculus Headset"
                         width="250" height="250">
                </div>
                <div class="product-info">
                    <h5 class="categories">Headsets, Oculus</h5>
                    <h4 class="title">Oculus Headset</h4>
                    <h3 class="price">
                        <span class="discounted-price">US$ 349.99</span>
                        <span class="original-price">US$ 419.99</span>
                    </h3>
                    <button>ADD TO BAG</button>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="best-sellers">
    <h1>All Products</h1>
    <hr>
    <div class="product-slider" id="all-products">
        <div class="container">
            <!-- 동적으로 생성될 제품 목록 -->
        </div>
    </div>
</section>

<section class="newsletter" id="newsletter-section">
    <h3>Newsletter Signup</h3>
    <p>Subscribe now and don't miss a single deal!</p>
    <form>
        <input type="email" name="email" placeholder="Your email...">
        <button type="submit">Subscribe</button>
    </form>
</section>

<footer>
    <div class="bottom-nav">
        <div class="container">
            <ul>
                <li class="list-title">Categories</li>
                <li><a href="#">Watches</a></li>
                <li><a href="#">Cameras</a></li>
                <li><a href="#">Phones</a></li>
                <li><a href="#">Tablets</a></li>
                <li><a href="#">Computers</a></li>
            </ul>

            <ul>
                <li class="list-title">About Us</li>
                <li><a href="#">Our Story</a></li>
                <li><a href="#">Press</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Awards</a></li>
                <li><a href="#">Stores</a></li>
            </ul>

            <ul>
                <li class="list-title">Social Media</li>
                <li><a href="#">Facebook</a></li>
                <li><a href="#">Linkedin</a></li>
                <li><a href="#">Instagram</a></li>
                <li><a href="#">Twitter</a></li>
                <li><a href="#">Youtube</a></li>
            </ul>

            <ul>
                <li class="list-title">Customer Service</li>
                <li><a href="#">Live Chat</a></li>
                <li><a href="#">Contact Us</a></li>
                <li><a href="#">Terms & Conditions</a></li>
                <li><a href="#">Delivery & Returns</a></li>
                <li><a href="#">Finance</a></li>
            </ul>
        </div>
    </div>
    <div class="copyright-text">
        2020 &copy; All Rights Reserved
    </div>
</footer>

<a href="#" id="open_preferences_center">Update cookies preferences</a>

<!-- 프로그레시브 이미지 로딩 스크립트 -->
<script>
  document.addEventListener('DOMContentLoaded', () => {
    // 프로그레시브 이미지 로딩 적용
    const progressiveImages = document.querySelectorAll('.progressive-image');

    const imgObserver = new IntersectionObserver((entries, observer) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          const img = entry.target;
          const src = img.dataset.src;

          if (src) {
            // 고해상도 이미지 로드
            const highResImage = new Image();
            highResImage.onload = () => {
              img.src = src;
              img.classList.remove('blur');
              img.classList.add('loaded');
            };
            highResImage.src = src;

            // 관찰 중단
            observer.unobserve(img);
          }
        }
      });
    }, {
      rootMargin: '50px 0px',
      threshold: 0.1
    });

    progressiveImages.forEach(img => {
      imgObserver.observe(img);
    });
  });
</script>

<!-- 모듈 타입으로 스크립트 로드 -->
<script type="module" src="./js/main.js"></script>
<!-- products.js는 main.js에서 동적으로 로드됨 -->
</body>
</html>